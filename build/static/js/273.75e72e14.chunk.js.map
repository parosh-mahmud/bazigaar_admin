{"version":3,"file":"static/js/273.75e72e14.chunk.js","mappings":"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","sources":["Pages/History/AllHistory.jsx"],"sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\r\nimport PrimaryLayout from \"../../Component/layouts/PrimaryLayout\";\r\nimport { SearchIcon } from \"../../Assets/icons\";\r\nimport { toast } from \"react-hot-toast\";\r\nimport { UnAuth } from \"../../Pages/Auth/UnAuth\";\r\nimport { ENDPOINT } from \"../../App/config/endpoint\";\r\nimport axios from \"axios\";\r\nimport TablePagination from \"../../Component/Shared/TablePagination\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst tableHead = [\r\n  { id: 1, name: \"SL\", width: 10 },\r\n  { id: 2, name: \"Image\", width: 40 },\r\n  { id: 3, name: \"Ticket Name\", width: 250 },\r\n  { id: 4, name: \"Price\", width: 120 },\r\n  { id: 5, name: \"Ticket Qty\", width: 140 },\r\n  { id: 6, name: \"Sold Ticket History\", width: 180 },\r\n  { id: 7, name: \"Draw Ticket History\", width: 180 },\r\n];\r\nconst AllHistory = ({ isLoading, setIsLoading }) => {\r\n  const [searchState, setSearchState] = useState(\"\");\r\n  const [tableDatas, setTableDatas] = useState([]);\r\n  const [tableDatas2, setTableDatas2] = useState([]);\r\n  const token = JSON.parse(localStorage.getItem(\"authInfo\"));\r\n\r\n  const handleData = () => {\r\n    axios\r\n      .get(\r\n        // `${process.env.REACT_APP_MAIN_URL}${ENDPOINT?.ticket?.getTicket}`,\r\n        `${process.env.REACT_APP_MAIN_URL}${ENDPOINT?.ticket?.getTicket}`,\r\n        {\r\n          headers: {\r\n            Authorization: \"Token \" + token.token,\r\n          },\r\n        }\r\n      )\r\n      .then((res) => {\r\n        if (res.data.type === \"error\") {\r\n          toast.error(res.message);\r\n        } else {\r\n          let temp = res.data;\r\n          temp = temp.reverse();\r\n          setTableDatas(temp);\r\n          setTableDatas2(temp);\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        // console.log(e);\r\n        UnAuth(e);\r\n      });\r\n  };\r\n  useEffect(() => {\r\n    handleData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let arr = [];\r\n    function filter() {\r\n      if (searchState !== \"\") {\r\n        tableDatas.map((dat) => {\r\n          if (\r\n            dat.LotteryName.toLowerCase().search(searchState.toLowerCase()) !==\r\n            -1\r\n          ) {\r\n            arr.push(dat);\r\n          }\r\n          return true;\r\n        });\r\n      } else {\r\n        tableDatas.map((dat) => {\r\n          arr.push(dat);\r\n          return true;\r\n        });\r\n      }\r\n      return arr;\r\n    }\r\n    filter();\r\n    setTableDatas2(arr);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [searchState]);\r\n\r\n  // pagination state\r\n  const [data, setData] = useState(tableDatas2);\r\n  const [currentPage, setcurrentPage] = useState(1);\r\n  const [itemsPerPage] = useState(10);\r\n  const indexOfLastItem = currentPage * itemsPerPage;\r\n  const indexOfFirstItem = indexOfLastItem - itemsPerPage;\r\n  const currentItems = data.slice(indexOfFirstItem, indexOfLastItem);\r\n\r\n  useEffect(() => {\r\n    setData(tableDatas2);\r\n    setcurrentPage(1);\r\n  }, [tableDatas2]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <PrimaryLayout pageTitle=\"All History\">\r\n        <div className=\"flex flex-col items-center justify-between gap-4 py-10 md:flex-row\">\r\n          <div>\r\n            <h3 className=\"font-poppins text-xl font-semibold text-black lg:text-2xl\">\r\n              History Phases\r\n            </h3>\r\n          </div>\r\n\r\n          <div className=\"flex w-full flex-col items-center gap-4 md:w-[unset] md:flex-row\">\r\n            <div className=\"flex w-full items-center\">\r\n              <input\r\n                type=\"text\"\r\n                className=\"h-[38px] w-full rounded-l-lg border border-black px-4 py-2 focus:border-black focus:outline-none\"\r\n                placeholder=\"Search lottery here...\"\r\n                defaultValue={searchState}\r\n                onChange={(e) => setSearchState(e.target.value)}\r\n                required={true}\r\n              />\r\n              <button\r\n                className=\"h-[38px] rounded-r-lg border border-black bg-black px-3 py-2 text-base font-semibold text-white\"\r\n                title=\"\">\r\n                <SearchIcon />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"rounded-lg bg-white pb-3 shadow-md\">\r\n          <div className=\"overflow-x-scroll\">\r\n            <table className=\"w-full\">\r\n              <thead className=\"w-full bg-[#F1F3F7]\">\r\n                <tr className=\"h-16 w-full\">\r\n                  {tableHead?.map((thead) => {\r\n                    return (\r\n                      <th\r\n                        style={{ minWidth: thead.width }}\r\n                        // width={thead.width}\r\n                        key={thead.id}\r\n                        className={`px-2 text-left font-inter text-base font-medium`}>\r\n                        {thead.name}\r\n                      </th>\r\n                    );\r\n                  })}\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"relative w-full\">\r\n                {currentItems?.map((tbody, i) => {\r\n                  return (\r\n                    <tr\r\n                      key={i}\r\n                      className=\"h-20 bg-white text-sm leading-none text-gray-800 hover:bg-gray-100\">\r\n                      <td className=\"px-2\">\r\n                        <p className=\"text-left font-poppins text-base font-normal\">\r\n                          {(currentPage - 1) * 10 + i + 1 < 10\r\n                            ? `0${(currentPage - 1) * 10 + i + 1}`\r\n                            : (currentPage - 1) * 10 + i + 1}\r\n                        </p>\r\n                      </td>\r\n                      <td className=\"px-2\">\r\n                        <div className=\"h-10 w-10\">\r\n                          <img\r\n                            className=\"h-full w-full\"\r\n                            // src={`${process.env.REACT_APP_MAIN_URL}${tbody?.image_banner}`}\r\n                            src={tbody?.image_banner}\r\n                            alt={tbody?.LotteryName}\r\n                          />\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-2\">\r\n                        <p className=\"text-left font-poppins text-base font-normal\">\r\n                          {tbody?.LotteryName}\r\n                        </p>\r\n                      </td>\r\n                      <td className=\"px-2\">\r\n                        <p className=\"text-left font-poppins text-base font-normal\">\r\n                          ${tbody?.Price}\r\n                        </p>\r\n                      </td>\r\n                      <td className=\"px-2\">\r\n                        <p className=\"text-left font-poppins text-base font-normal\">\r\n                          {tbody?.NumberOfTickets}\r\n                        </p>\r\n                      </td>\r\n                      <td className=\"px-2\">\r\n                        <Link\r\n                          to={`/history/sold-lottery/${tbody?.LotteryId}`}\r\n                          className=\"rounded-full border border-gray-700 px-3 py-1 text-center font-poppins text-base font-normal hover:bg-gray-700 hover:text-white\">\r\n                          View Sold Ticket\r\n                        </Link>\r\n                      </td>\r\n                      <td className=\"px-2\">\r\n                        <Link\r\n                          to={`/history/draw-winner/${tbody?.LotteryId}`}\r\n                          className=\"rounded-full border border-gray-700 px-3 py-1 text-center font-poppins text-base font-normal hover:bg-gray-700 hover:text-white\">\r\n                          View Draw Ticket\r\n                        </Link>\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n\r\n          <TablePagination\r\n            data={data}\r\n            currentPage={currentPage}\r\n            setcurrentPage={setcurrentPage}\r\n            itemsPerPage={itemsPerPage}\r\n          />\r\n        </div>\r\n      </PrimaryLayout>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default AllHistory;\r\n"],"names":["tableHead","id","name","width","_ref","isLoading","setIsLoading","_useState","useState","_useState2","_slicedToArray","searchState","setSearchState","_useState3","_useState4","tableDatas","setTableDatas","_useState5","_useState6","tableDatas2","setTableDatas2","token","JSON","parse","localStorage","getItem","useEffect","_ENDPOINT$ticket","axios","get","concat","process","ENDPOINT","ticket","getTicket","headers","Authorization","then","res","data","type","toast","error","message","temp","reverse","catch","e","UnAuth","handleData","arr","map","dat","LotteryName","toLowerCase","search","push","_useState7","_useState8","setData","_useState9","_useState10","currentPage","setcurrentPage","_useState11","itemsPerPage","indexOfLastItem","indexOfFirstItem","currentItems","slice","_jsx","Fragment","children","_jsxs","PrimaryLayout","pageTitle","className","placeholder","defaultValue","onChange","target","value","required","title","SearchIcon","thead","style","minWidth","tbody","i","src","image_banner","alt","Price","NumberOfTickets","Link","to","LotteryId","TablePagination"],"sourceRoot":""}